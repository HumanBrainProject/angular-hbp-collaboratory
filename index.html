


<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>angular-hbp-collaboratory &mdash; angular-hbp-collaboratory 0.1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/hbpdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/hbpdoc.js"></script>
    <link rel="top" title="angular-hbp-collaboratory 0.1.5 documentation" href="#" />
    <link rel="next" title="Module: clb-app" href="module-clb-app.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">

  </head>
  <body role="document">
<div class="hbpdoc-page">
    <section class="hbpdoc-title page-header">
        <a class="project-title" href="#">angular-hbp-collaboratory</a>

        <a class="hbpdoc-toc-toggle pull-right" href>
            <span class="zmdi zmdi-menu"></span> <span class="sr-only icon-text">Menu</span>
        </a>
    </section>
    <section class="hbpdoc-main">
        <nav class="hbpdoc-sidebar hbpdoc-container">
            <a class="hbpdoc-toc-toggle pull-right" href>
                <span class="zmdi zmdi-menu"></span> <span class="sr-only icon-text">Menu</span>
            </a>
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">angular-hbp-collaboratory</a><ul>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#readme">README</a></li>
<li><a class="reference internal" href="#install-using-bower">Install Using Bower</a></li>
<li><a class="reference internal" href="#contributing">Contributing</a><ul>
<li><a class="reference internal" href="#migration-from-angular-hbp-common">Migration from angular-hbp-common</a><ul>
<li><a class="reference internal" href="#service-refactoring">Service Refactoring</a></li>
<li><a class="reference internal" href="#ui-refactoring">UI Refactoring</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#license">LICENSE</a></li>
</ul>
</li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="module-clb-app.html"
                        title="next chapter">Module: <code class="docutils literal"><span class="pre">clb-app</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        </nav>

        <article class="hbpdoc-content">

            <div class="content">
                

                <aside class="hbpdoc-hnav hbpdoc-hnav-top">
                    
                    
                    <span class="hbpdoc-hnav-next">
                        next: <a class="hbpdoc-hnav-link" href="module-clb-app.html">Module: <code class="docutils literal"><span class="pre">clb-app</span></code></a>
                    </span>
                    
                </aside>

                <div class="section" id="angular-hbp-collaboratory">
<h1>angular-hbp-collaboratory<a class="headerlink" href="#angular-hbp-collaboratory" title="Permalink to this headline">¶</a></h1>
<p>An AngularJS tool to develop web application based on the HBP Collaboratory</p>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="module-clb-app.html">Module: <code class="docutils literal"><span class="pre">clb-app</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-automator.html">Module: <code class="docutils literal"><span class="pre">clb-automator</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-collab.html">Module: <code class="docutils literal"><span class="pre">clb-collab</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-context-data.html">Module: <code class="docutils literal"><span class="pre">clb-context-data</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-env.html">Module: <code class="docutils literal"><span class="pre">clb-env</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-lodash.html">Module: <code class="docutils literal"><span class="pre">lodash</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-hbpCollaboratoryCore.html">Module: <code class="docutils literal"><span class="pre">hbpCollaboratoryCore</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-rest.html">Module: <code class="docutils literal"><span class="pre">clb-rest</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-storage.html">Module: <code class="docutils literal"><span class="pre">clb-storage</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-stream.html">Module: <code class="docutils literal"><span class="pre">clb-stream</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-ui-dialog.html">Module: <code class="docutils literal"><span class="pre">clb-ui-dialog</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-ui-error.html">Module: <code class="docutils literal"><span class="pre">clb-ui-error</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-ui-form.html">Module: <code class="docutils literal"><span class="pre">clb-ui-form</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-ui-identity.html">Module: <code class="docutils literal"><span class="pre">clb-ui-identity</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-ui-loading.html">Module: <code class="docutils literal"><span class="pre">clb-ui-loading</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-ui-storage.html">Module: <code class="docutils literal"><span class="pre">clb-ui-storage</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="module-clb-ui-stream.html">Module: <code class="docutils literal"><span class="pre">clb-ui-stream</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="angular.html">Namespace: <code class="docutils literal"><span class="pre">angular</span></code></a></li>
</ul>
</div>
</div>
<div class="section" id="readme">
<h2>README<a class="headerlink" href="#readme" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<a class="reference external image-reference" href="https://travis-ci.org/HumanBrainProject/angular-hbp-collaboratory"><img alt="https://travis-ci.org/HumanBrainProject/angular-hbp-collaboratory.svg?branch=master" src="https://travis-ci.org/HumanBrainProject/angular-hbp-collaboratory.svg?branch=master" /></a>
<p>angular-hbp-collaboratory is a collection of AngularJS module to
develop applications for the HBP Collaboratory.</p>
</div>
<div class="section" id="install-using-bower">
<h2>Install Using Bower<a class="headerlink" href="#install-using-bower" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre>bower install angular-hbp-collaboratory
</pre></div>
</div>
<ul class="simple">
<li><cite>angular-hbp-collaboratory.js</cite> provides all the needed AngularJS module</li>
<li><cite>angular-hbp-collaboratory.css</cite> provides styles for the visual components</li>
</ul>
<p>Alternatively you can rely on <cite>src/angular-hbp-collaboratory/main.scss</cite> if you
plan to use Sass in your project.</p>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>Dependencies:</p>
<p>This project use NodeJS and NPM to test, lint and generating the final library.</p>
<p>Bower, Gulp and ESLint should be installed globally:</p>
<div class="highlight-bash"><div class="highlight"><pre>npm install -g bower gulp eslint
</pre></div>
</div>
<p>Install:</p>
<div class="highlight-bash"><div class="highlight"><pre>git clone git@github.com:HumanBrainProject/angular-hbp-collaboratory.git
<span class="nb">cd </span>angular-hbp-collaboratory
npm install
bower install
</pre></div>
</div>
<p>Install this pre-commit hook to ensure your code is green before a committing:</p>
<div class="highlight-bash"><div class="highlight"><pre>cp .git-pre-commit .git/hooks/pre-commit
</pre></div>
</div>
<p>Running tests on code change:</p>
<div class="highlight-bash"><div class="highlight"><pre>gulp watch
</pre></div>
</div>
<div class="section" id="migration-from-angular-hbp-common">
<h3>Migration from angular-hbp-common<a class="headerlink" href="#migration-from-angular-hbp-common" title="Permalink to this headline">¶</a></h3>
<p>Here is a quick (and incomplete) checklist of refactoring to operate to your
project if you want to migrate from angular-hbp-common to this cleaner library:</p>
<div class="section" id="service-refactoring">
<h4>Service Refactoring<a class="headerlink" href="#service-refactoring" title="Permalink to this headline">¶</a></h4>
<p>First, rely on the services from angular-hbp-collaboratory. For this, you need
to depends on the <code class="docutils literal"><span class="pre">hbpCollaboratoryCore</span></code> module.</p>
<p>If you use bower to install, it will ask you to resolve a conflict about the
angular-bootstrap version. Stick to the angular-hbp-common declaration at
this point. At this point, your code should still work, that will let you
progressively refactor to use the new library instead of the old one:</p>
<div class="highlight-python"><div class="highlight"><pre>Add dependency &#39;hbpCollaboratory&#39;
hbpUtil.ferr -&gt; clbError.rejectHttpError (from clb-error module)
hbpErrorService -&gt; clbError              (from clb-error module)
hbpUtil.paginatedResultSet -&gt; clbResultSet.get (from clb-rest module)
hbpIdentityUserDirectory -&gt; clbUser      (from clb-identity module)
hbpCollabStore -&gt; clbCollab              (from clb-collab module)
hbpCollabStore.context -&gt; clbContext     (from clb-collab module)
hbpCollaboratoryNavStore -&gt; clbCollabNav (from clb-collab module)
hbpCollaboratoryAppStore -&gt; clbCollabApp (from clb-collab module)
clbCollabApp -&gt; clbCollabApp             (from clb-collab module)
hbpEntityStore -&gt; clbStorage             (from clb-storage module)
hbpFileStore -&gt; clbStorage               (from clb-storage module)
hbpProjectStore -&gt; clbStorage            (from clb-storage module)
hbpConfigStore -&gt; Manually refactor to clbCtxData (from clb-ctx-data)
  The service now use JSON as data format and the method signature
  changed from method(config) to method(ctx, data)
</pre></div>
</div>
<p>In fact, <code class="docutils literal"><span class="pre">hbpCollaboratoryCore</span></code> is a shell module that will require many
sub-modules as an easy way to migrate and import everything.
It would be even better if your application require only the needed sub-modules
as indicated by the refactoring list above.</p>
<p>Once the refactoring of module is done, there is the refactoring of methods:</p>
<div class="highlight-python"><div class="highlight"><pre>clbStorage.getEntityByContext(ctx) -&gt; clbStorage.getEntity({ctx: ctx})
clbStorage.get( -&gt; clbStorage.getEntity(
clbStorage.getChildren now return a ResultSet like other services
</pre></div>
</div>
<p>clbUser.isHbpMember is no more because the accreditation multiply. You should
instead make a call like:</p>
<blockquote>
<div>clbUser.isHbpMember() -&gt; clbUser.isGroupMember([&#8216;hbp-accred-sga1&#8217;]);</div></blockquote>
<p>At this point, your javascript code should rely only on
<code class="docutils literal"><span class="pre">angular-hbp-collaboratory</span></code>, with the exception of the UI. Your application
should work as previously. If you were not using any directive from the
beforementioned module, you are done and you can remove the old module import,
as well as their reference in <code class="docutils literal"><span class="pre">bower.json</span></code></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// If there is no UI components in use</span>

<span class="c1">// before</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myModule&#39;</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">&#39;hbpCollaboratoryCore&#39;</span><span class="p">,</span>
  <span class="s1">&#39;hbpCommon&#39;</span><span class="p">,</span>
  <span class="s1">&#39;bbpDocumentClient&#39;</span>
<span class="p">]);</span>

<span class="c1">// after</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myModule&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="c1">// some of the following:</span>
  <span class="s1">&#39;clb-app&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-automator&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-collab&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-env&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-error&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-identity&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-rest&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-storage&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-stream&#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>If your code is using some of the directive from angular-hbp-common or
angular-hbp-document-client, you need to refactor them as well before being
able to cut the old dependencies.</p>
</div>
<div class="section" id="ui-refactoring">
<h4>UI Refactoring<a class="headerlink" href="#ui-refactoring" title="Permalink to this headline">¶</a></h4>
<p>UI Bootstrap has been upgraded to the next major version and the components are
now prefixed. This means you cannot use the UI part of angular-hbp-common with
angular-hbp-collaboratory. At this point, you should entirely remove
angular-hbp-common from your dependencies and require the UI package from
angular-hbp-collaboratory.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// before</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myModule&#39;</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">&#39;hbpCollaboratoryCore&#39;</span><span class="p">,</span>
  <span class="s1">&#39;hbpCommon&#39;</span><span class="p">,</span>
  <span class="s1">&#39;bbpDocumentClient&#39;</span>
<span class="p">]);</span>

<span class="c1">// after</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myModule&#39;</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">&#39;hbpCollaboratoryCore&#39;</span><span class="p">,</span>
  <span class="s1">&#39;hbpCollaboratoryUI&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>You now need to run <code class="docutils literal"><span class="pre">bower</span> <span class="pre">update</span></code> and resolve the conflict on <code class="docutils literal"><span class="pre">angular-bootsrap</span></code>
by choosing the version in <code class="docutils literal"><span class="pre">angular-hbp-collaboratory</span></code>.</p>
<p>If your code is using directives from this library, please refer to the angular-bootstrap
<span class="target" id="migration-guide-https-github-com-angular-ui-bootstrap-wiki-migration-guide-for-prefixes">Migration Guide &lt;https://github.com/angular-ui/bootstrap/wiki/Migration-guide-for-prefixes&gt;</span>.
To find if and where your code is using such directives, you can run the following command
in your source code folder:</p>
<div class="highlight-bash"><div class="highlight"><pre>grep -ro <span class="s1">&#39;&lt;accordion\|&lt;accordion-group\|&lt;accordion-heading\|&lt;accordionConfig\|&lt;alert\|&lt;btn-checkbox\|&lt;btn-radio\|&lt;buttonConfig\|&lt;carousel\|&lt;slide\|&lt;collapse\|&lt;dateParser\|&lt;datepicker\|&lt;datepicker-popup\|&lt;daypicker\|&lt;monthpicker\|&lt;yearpicker\|&lt;datepickerConfig\|&lt;datepickerPopupConfig\|&lt;dropdown\|&lt;dropdown-toggle\|&lt;dropdown-menu\|&lt;keyboard-nav\|&lt;dropdownService\|&lt;$modal\|&lt;$modalInstance\|&lt;$modalStack\|&lt;modal-transclude\|&lt;pagination\|&lt;pager\|&lt;pagerConfig\|&lt;paginationConfig\|&lt;popover\|&lt;popover-template\|&lt;popover-html\|&lt;$position\|&lt;progressbar\|&lt;bar\|&lt;progress\|&lt;progressConfig\|&lt;rating\|&lt;ratingConfig\|&lt;tabset\|&lt;tab\|&lt;tab-heading\|&lt;timepicker\|&lt;timepickerConfig\|&lt;tooltip\|&lt;tooltip-template\|&lt;tooltip-html\|&lt;$tooltip\|&lt;typeahead\|&lt;typeahead-highlight\|&lt;typeahead-match\|&lt;typeaheadHighlightFilter\|&lt;typeaheadParser&#39;</span> .
</pre></div>
</div>
<p>You can also use the directives provided by this package.
Please be sure to check the change in the directive attributes prefix as well.:</p>
<div class="highlight-python"><div class="highlight"><pre>hbp-file-browser -&gt; clb-ui-storage (root -&gt; clb-root, entity -&gt; clb-entity)
hbp-error-message -&gt; clb-error-message (hbp-promise -&gt; clb-promise, hbp-message -&gt; clb-message)
hbp-usercard -&gt; clb-usercard (hbp-user -&gt; clb-user, hbp-template -&gt; clb-template)
hbp-loading -&gt; clb-loading (hbp-promise -&gt; clb-promise, hbp-message -&gt; clb-message)
</pre></div>
</div>
<p>If you wrote a usercard custom template (using <code class="docutils literal"><span class="pre">hbp-template</span></code> attribute), you should update the following css classes
and probably update the template to conform to the new html structure:</p>
<div class="highlight-python"><div class="highlight"><pre>hbp-usercard -&gt; clb-usercard
hbp-usercard-pix -&gt; clb-usercard-pix
hbp-user-avatar -&gt; clb-user-avatar
hbp-usercard-header -&gt; clb-usercard-header
hbp-usercard-institution -&gt; clb-usercard-institution
hbp-usercard-contact -&gt; clb-usercard-contact
hbp-usercard-contact-item -&gt; clb-usercard-contact-item
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">hbpDialogFactory</span></code> has been removed, with the exception of <code class="docutils literal"><span class="pre">hbpDialogFactory.error</span></code> and <code class="docutils literal"><span class="pre">hbpDialogFactory.confirm</span></code> which
are now respectively <code class="docutils literal"><span class="pre">clbErrorDialog.open</span></code> (module <code class="docutils literal"><span class="pre">clb-ui-error</span></code>) and <code class="docutils literal"><span class="pre">clbConfirm.open</span></code> (module <code class="docutils literal"><span class="pre">clb-ui-dialog</span></code>).
These two refactoring will have you covered:</p>
<div class="highlight-python"><div class="highlight"><pre>hbpDialogFactory -&gt; clbErrorDialog and/or clbConfirm
hbpDialogFactory.error -&gt; clbErrorDialog.open
hbpDialogFactory.confirm -&gt; clbConfirm.open
</pre></div>
</div>
<p>If you were using other methods from hbpDialogFactory (e.g.: <code class="docutils literal"><span class="pre">.alert()</span></code>),
you need to rewrite them using angular-bootstrap <code class="docutils literal"><span class="pre">$uibModal</span></code> (read the
<span class="target" id="documentation-https-angular-ui-github-io-bootstrap-modal">documentation &lt;https://angular-ui.github.io/bootstrap/#/modal&gt;</span>)</p>
<p>Since usage of <code class="docutils literal"><span class="pre">hbp-generated-icon</span></code> has been deprecated for anything but users
without avatars, it has been replaced by a new directive called <code class="docutils literal"><span class="pre">clb-user-avatar</span></code>
available in the module clb-ui-identity.
It displays either a generated icon or the user profile picture. This new
component is also easier to customize using pure css.</p>
<p>At the end of the process, your application should only load <code class="docutils literal"><span class="pre">angular-hbp-collaboratory</span></code></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myModule&#39;</span><span class="p">,</span> <span class="p">[</span>
<span class="c1">// some of the following:</span>
  <span class="s1">&#39;clb-app&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-automator&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-collab&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-env&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-error&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-identity&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-rest&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-storage&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-stream&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-ui-error&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-ui-storage&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-ui-form&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-ui-loading&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clb-stream&#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="license">
<h2>LICENSE<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>MIT</p>
<p>Read the project LICENSE file.</p>
</div>
</div>

            </div>

            <aside class="hbpdoc-hnav hbpdoc-hnav-bottom">
                
                
                <span class="hbpdoc-hnav-next">
                    next: <a class="hbpdoc-hnav-link" href="module-clb-app.html">Module: <code class="docutils literal"><span class="pre">clb-app</span></code></a>
                </span>
                
            </aside>
        </article>
    </section>


    <div class="hbpdoc-footer">
        angular-hbp-collaboratory <small>0.1.5</small> 
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
    </div>
</div>

  </body>
</html>